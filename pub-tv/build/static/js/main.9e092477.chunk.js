(window["webpackJsonppub-tv"]=window["webpackJsonppub-tv"]||[]).push([[0],{23:function(t,e,n){t.exports=n.p+"static/media/NatureScenes_TV.6c49ca5a.m4v"},25:function(t,e,n){t.exports=n.p+"static/media/logo.d4dee490.png"},26:function(t,e,n){t.exports=n(51)},32:function(t,e,n){},50:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),r=n(21),i=n.n(r),c=(n(31),n(32),n(4)),s=n(5),l=n(7),d=n(6),u=n(2),h=n(8),m=n(22),p=n.n(m),v=(n(50),n(23)),f=n.n(v),g=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return a.a.createElement("div",{className:"Intro"},a.a.createElement("video",{autoPlay:"autoplay",muted:!0,onEnded:this.props.onIntroEnded},a.a.createElement("source",{src:f.a,type:"video/mp4"})))}}]),e}(a.a.Component),y=n(53),C=n(54),b=n(55),E=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).call(this))).changeSingleContent=t.changeSingleContent.bind(Object(u.a)(t)),t.state={constructedContent:[],intervalId:0},t}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;console.log("Grid component mounted!"),console.log(this.props.contentArray);var e=[];if(this.props.contentArray.length>0){for(var n=0;n<9;n++){var o=this.props.contentArray[Math.floor(Math.random()*(this.props.contentArray.length-1))];console.log("pushed "+o),e.push(o)}e[Math.floor(Math.random()*(e.length-1))]="spinner";for(var a=0;a<2;a++){e[Math.floor(Math.random()*(e.length-1))]="green"}this.setState({constructedContent:e},function(){console.log("Finished setting initial content.")})}var r=setInterval(function(){t.changeSingleContent()},1e3);this.setState({intervalId:r})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId)}},{key:"changeSingleContent",value:function(){var t=this.state.constructedContent,e=Math.floor(Math.random()*(t.length-1)),n=Math.floor(7*Math.random());if(n<5){var o=Math.floor(Math.random()*(this.props.contentArray.length-1));t[e]=this.props.contentArray[o]}else 5===n?t[e]="spinner":6===n&&(t[e]="green");this.setState({constructedContent:t})}},{key:"renderSingleContent",value:function(t){return t.endsWith(".jpg")?(console.log("Render "+t),a.a.createElement("img",{src:"/content/"+t})):t.endsWith(".mp4")?a.a.createElement("video",{autoPlay:"autoplay",muted:!0},a.a.createElement("source",{src:"/content/"+t,type:"video/mp4"})):"spinner"===t?a.a.createElement("div",{className:"spinner"},a.a.createElement("div",{className:"spinner-inner"},a.a.createElement(y.a,{animation:"border",variant:"light"}))):a.a.createElement("div",{className:"green"})}},{key:"renderContent",value:function(t){var e=this,n=Math.ceil(t.length/3);console.log("Number of rows: "+n);return a.a.createElement("div",null,Array(n).fill().map(function(n,o){return a.a.createElement(C.a,{key:o},t.slice(3*o,3*o+3).map(function(t,n){return a.a.createElement(b.a,{key:n},e.renderSingleContent(t))}))}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"Grid"},this.renderContent(this.state.constructedContent))}}]),e}(a.a.Component),I=n(25),j=n.n(I),S=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).call(this))).cycleContent=t.cycleContent.bind(Object(u.a)(t)),t.state={constructedContent:[],contentIndex:0,intervalId:0},t}return Object(h.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=[],n=[],o=[];this.props.contentArray.forEach(function(t){t.endsWith(".mp4")?o.push(t):t.endsWith(".jpg")&&n.push(t)}),console.log("Video content: "),console.log(o),console.log("Image content: "),console.log(n);for(var a=0;a<10;a++){if(0===Math.floor(2*Math.random())){var r=Math.floor(Math.random()*(o.length-1));o[r]?e.push(o[r]):console.log("WARNING: chose video but no videos were found!")}else{var i=Math.floor(Math.random()*(n.length-1));if(n[i].includes("@"))for(var c=n[i].substr(0,n[i].indexOf("@")),s=0;s<5;s++){var l=c+"@"+s+".jpg";n.includes(l)&&e.push(l)}}}this.setState({constructedContent:e},function(){console.log(t.state.constructedContent),t.cycleContent()})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.state.intervalId)}},{key:"cycleContent",value:function(){var t=this,e=this.state.constructedContent[this.state.contentIndex],n=0;console.log("Current URL: "+e),e.endsWith(".jpg")?(console.log("Current URL is an image."),n=setTimeout(function(){t.state.contentIndex>=t.state.constructedContent.length-1?t.setState({contentIndex:0,intervalId:n},function(){console.log("End slideshow!"),t.props.onSlideshowEnd()}):t.setState({contentIndex:t.state.contentIndex+1,intervalId:n},function(){console.log("Cycling content..."),t.cycleContent()})},2e3)):e.endsWith(".mp4")&&(n=setTimeout(function(){t.state.contentIndex>=t.state.constructedContent.length-1?t.setState({contentIndex:0},function(){t.props.onSlideshowEnd()}):t.setState({contentIndex:t.state.contentIndex+1,intervalId:n},function(){t.cycleContent()})},15e3),this.setState({intervalId:n}))}},{key:"renderContent",value:function(t){if(t){if(t.endsWith(".jpg"))return a.a.createElement("img",{src:"/content/"+t});if(t.endsWith(".mp4"))return a.a.createElement("video",{autoPlay:"autoplay",muted:!0},a.a.createElement("source",{src:"/content/"+t,type:"video/mp4"}))}}},{key:"render",value:function(){return a.a.createElement("div",{className:"Slideshow"},this.renderContent(this.state.constructedContent[this.state.contentIndex]),a.a.createElement("img",{className:"logo",src:j.a}))}}]),e}(a.a.Component),O=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(l.a)(this,Object(d.a)(e).call(this))).onIntroEnded=t.onIntroEnded.bind(Object(u.a)(t)),t.onGridTimeout=t.onGridTimeout.bind(Object(u.a)(t)),t.onSlideshowTimeout=t.onSlideshowTimeout.bind(Object(u.a)(t)),t.state={mode:0,gridContent:[]},t}return Object(h.a)(e,t),Object(s.a)(e,[{key:"onIntroEnded",value:function(){var t=this;0===this.state.mode&&p.a.get("/api/content").then(function(e){t.setState({gridContent:e.data,mode:1},function(){setTimeout(function(){t.onGridTimeout()},2e4)})})}},{key:"onGridTimeout",value:function(){1===this.state.mode&&this.setState({mode:2})}},{key:"onSlideshowTimeout",value:function(){2===this.state.mode&&this.setState({mode:0})}},{key:"renderView",value:function(){return 0===this.state.mode?a.a.createElement(g,{onIntroEnded:this.onIntroEnded}):1===this.state.mode?a.a.createElement(E,{contentArray:this.state.gridContent}):2===this.state.mode?a.a.createElement(S,{contentArray:this.state.gridContent,onSlideshowEnd:this.onSlideshowTimeout}):void 0}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"AppContainer"},this.renderView()))}}]),e}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[26,1,2]]]);
//# sourceMappingURL=main.9e092477.chunk.js.map